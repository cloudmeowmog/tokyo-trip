<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ±äº¬è¦ªå­å¯¶å¯å¤¢ä¹‹æ—…</title>
    <!-- å¼•å…¥ React èˆ‡ Babel -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- å¼•å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- è¨­å®š iOS Web App æ¨¡å¼ -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: #f3f4f6; margin: 0; padding: 0; }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .tap-highlight-transparent { -webkit-tap-highlight-color: transparent; }
        .safe-bottom { padding-bottom: env(safe-area-inset-bottom); }
        .map-text-shadow { text-shadow: 1px 1px 0 #fff, -1px -1px 0 #fff, 1px -1px 0 #fff, -1px 1px 0 #fff, 1px 1px 0 #fff; }
        .metro-station { fill: white; stroke-width: 2; r: 5; }
        
        /* Loading é®ç½©æ¨£å¼ */
        #loading { position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; background: #f3f4f6; z-index: 9999; flex-direction: column; transition: opacity 0.5s ease; }
        .spinner { border: 4px solid rgba(0, 0, 0, 0.1); width: 36px; height: 36px; border-radius: 50%; border-left-color: #4f46e5; animation: spin 1s linear infinite; margin-bottom: 10px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>

    <!-- è¼‰å…¥æŒ‡ç¤ºå™¨ -->
    <div id="loading">
        <div class="spinner"></div>
        <div style="color: #666; font-size: 14px;">æ­£åœ¨è¼‰å…¥è¡Œç¨‹...</div>
    </div>

    <div id="root"></div>

    <!-- å¼·åˆ¶ç§»é™¤ Loading (iOS å®‰å…¨é–¥) -->
    <script>
        setTimeout(function() {
            var loading = document.getElementById('loading');
            if(loading) loading.style.display = 'none';
        }, 3000); // 3ç§’å¾Œå¼·åˆ¶é€²å…¥
    </script>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // ==========================================
        // 1. åœ–ç¤ºå…ƒä»¶ (Icons)
        // ==========================================
        const iconStyle = { width: '24px', height: '24px' };
        // Navigation Icons
        const ListIcon = ({className}) => <svg style={iconStyle} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="8" x2="21" y1="6" y2="6"/><line x1="8" x2="21" y1="12" y2="12"/><line x1="8" x2="21" y1="18" y2="18"/><line x1="3" x2="3.01" y1="6" y2="6"/><line x1="3" x2="3.01" y1="12" y2="12"/><line x1="3" x2="3.01" y1="18" y2="18"/></svg>;
        const MapIcon = ({className}) => <svg style={iconStyle} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"/><line x1="8" x2="8" y1="2" y2="18"/><line x1="16" x2="16" y1="6" y2="22"/></svg>;
        const GuideIcon = ({className}) => <svg style={iconStyle} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="16" y2="12"/><line x1="12" x2="12.01" y1="8" y2="8"/></svg>;
        const CalendarIcon = ({className}) => <svg style={iconStyle} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/><path d="m9 16 2 2 4-4"/></svg>;
        const InfoIcon = ({className}) => <svg style={iconStyle} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>; 

        // Content Icons
        const MapPinIcon = ({className}) => <svg style={iconStyle} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>;
        const TrainIcon = ({className}) => <svg style={iconStyle} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="16" height="16" x="4" y="4" rx="2"/><path d="M4 10h16"/><path d="M12 4v6"/><path d="M8 20v2"/><path d="M16 20v2"/><path d="m9 16 2 2 4-4"/></svg>;
        const CoffeeIcon = ({className}) => <svg style={iconStyle} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M17 8h1a4 4 0 1 1 0 8h-1"/><path d="M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z"/><line x1="6" x2="6" y1="2" y2="4"/><line x1="10" x2="10" y1="2" y2="4"/><line x1="14" x2="14" y1="2" y2="4"/></svg>;
        const HomeIcon = ({className}) => <svg style={iconStyle} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>;
        const BedIcon = ({className}) => <svg style={iconStyle} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M2 4v16"/><path d="M2 8h18a2 2 0 0 1 2 2v10"/><path d="M2 17h20"/><path d="M6 8v9"/></svg>;
        const CameraIcon = ({className}) => <svg style={iconStyle} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"/><circle cx="12" cy="13" r="3"/></svg>;
        const ShoppingBagIcon = ({className}) => <svg style={iconStyle} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"/><path d="M3 6h18"/><path d="M16 10a4 4 0 0 1-8 0"/></svg>;
        const PlaneIcon = ({className}) => <svg style={iconStyle} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M2 12h20"/><path d="m13 2-3.5 10"/><path d="m9 22 3.5-10"/><path d="M20.5 4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3Z"/><path d="M3.5 17a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3Z"/></svg>;
        const NavigationIcon = ({className}) => <svg style={iconStyle} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polygon points="3 11 22 2 13 21 11 13 3 11"/></svg>;
        const ExternalLinkIcon = ({className}) => <svg style={{width:'12px', height:'12px'}} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" x2="21" y1="14" y2="3"/></svg>;
        const TicketIcon = ({className}) => <svg style={iconStyle} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z"/><path d="M13 5v2"/><path d="M13 17v2"/><path d="M13 11v2"/></svg>;

        const IconComponent = ({ name, className }) => {
            switch (name) {
                case 'plane': return <PlaneIcon className={className} />;
                case 'train': return <TrainIcon className={className} />;
                case 'bed': return <BedIcon className={className} />;
                case 'camera': return <CameraIcon className={className} />;
                case 'shopping': return <ShoppingBagIcon className={className} />;
                case 'coffee': return <CoffeeIcon className={className} />;
                case 'walk': return <NavigationIcon className={className} />;
                default: return <MapPinIcon className={className} />;
            }
        };

        // ==========================================
        // 2. è³‡æ–™å®šç¾©å€ (Data)
        // ==========================================
        const HOTEL_NAME = "Stayme THE HOTEL Ueno";
        const HOTEL_ADDRESS = "Stayme THE HOTEL Ueno, Higashiueno, Taito City, Tokyo";

        const attractionInfos = [
            { id: "hijiri", name: "å¾¡èŒ¶ä¹‹æ°´ è–æ©‹", icon: "ğŸŒ‰", tag: "è–åœ°å·¡ç¦®", desc: "é›»å½±ã€Šéˆ´èŠ½ä¹‹æ—…ã€‹ç¶“å…¸å ´æ™¯ã€‚ç«™åœ¨æ©‹ä¸Šå¯ä»¥åŒæ™‚çœ‹åˆ°ç´…ã€é»ƒã€æ©˜ä¸‰è‰²é›»è»Šäº¤éŒ¯è€Œéï¼Œæ˜¯éµé“è¿·èˆ‡å½±è¿·å¿…æ‹è–åœ°ã€‚", tips: "ä¸‹åˆå‰å¾€é †å…‰ï¼Œæ‹æ”æ•ˆæœæœ€å¥½ã€‚" },
            { id: "akiba", name: "ç§‹è‘‰åŸ Electric Town", icon: "âš¡", tag: "å‹•æ¼«/é›»å™¨", desc: "æ—¥æœ¬æ¬¡æ–‡åŒ–ä¸­å¿ƒã€‚æ»¿è¡—çš„å‹•æ¼«å‘¨é‚Šã€æ¨¡å‹åº—ã€å¥³åƒ•å’–å•¡å»³èˆ‡å¤§å‹é›»å™¨è¡Œã€‚Yodobashi Akiba æ˜¯å¿…é€›åœ°æ¨™ã€‚", tips: "ç„¡ç·šé›»æœƒé¤¨ (Radio Kaikan) æ¨¡å‹æœ€é½Šå…¨ã€‚" },
            { id: "sensoji", name: "æ·ºè‰å¯º & é›·é–€", icon: "ğŸ®", tag: "å‚³çµ±æ–‡åŒ–", desc: "æ±äº¬æœ€å¤è€çš„å¯ºå»Ÿã€‚å·¨å¤§çš„ç´…ç‡ˆç± ã€Œé›·é–€ã€æ˜¯æ±äº¬è±¡å¾µã€‚ä»²è¦‹ä¸–é€šæœ‰è¨±å¤šäººå½¢ç‡’ã€ä»™è²ç­‰å‚³çµ±å°åƒã€‚", tips: "éŠå®¢éå¸¸å¤šï¼Œå»ºè­°æ—©ä¸Š9é»å‰æŠµé”æ‹ç…§ã€‚" },
            { id: "skytree", name: "æ±äº¬æ™´ç©ºå¡”", icon: "ğŸ—¼", tag: "åœ°æ¨™/å¯¶å¯å¤¢", desc: "ä¸–ç•Œæœ€é«˜é›»æ³¢å¡”ã€‚æ¨“ä¸‹ Solamachi å•†å ´æœ‰å¯¶å¯å¤¢ä¸­å¿ƒ(çƒˆç©ºåé®åº—)èˆ‡ Kirby Cafeã€‚", tips: "4F æˆ¶å¤–éœ²å°æ˜¯æ‹æ”æ™´ç©ºå¡”å…¨è²Œçš„å¥½ä½ç½®ã€‚" },
            { id: "odaiba", name: "å°å ´ ç¨è§’ç¸é‹¼å½ˆ", icon: "ğŸ¤–", tag: "é‹¼å½ˆ", desc: "ä½æ–¼ DiverCity å»£å ´å‰ã€‚ç™½å¤©æœ‰ 4 å ´è®Šèº«ç§€(ç¨è§’ç¸æ¨¡å¼->æ¯€æ»…æ¨¡å¼)ï¼Œæ™šä¸Šæœ‰ç‡ˆå…‰ç§€ã€‚", tips: "è®Šèº«æ™‚é–“ï¼š11:00, 13:00, 15:00, 17:00ã€‚" },
            { id: "teamlab", name: "teamLab Planets", icon: "âœ¨", tag: "æ²‰æµ¸å¼è—è¡“", desc: "éœ€èµ¤è…³é€²å…¥çš„æ°´ä¸­ç¾è¡“é¤¨ã€‚å…‰å½±èˆ‡æ°´é¢çš„çµåˆéå¸¸å¤¢å¹»ï¼Œé©åˆå¤§äººå°å­©äº’å‹•ã€‚", tips: "å»ºè­°ç©¿è‘—çŸ­è¤²æˆ–æ˜“æ²èµ·çš„è¤²å­(æ°´æ·±åŠè†)ã€‚" },
            { id: "karuizawa", name: "è¼•äº•æ¾¤", icon: "ğŸš²", tag: "åº¦å‡å‹åœ°", desc: "é¿æš‘å‹åœ°ï¼Œå……æ»¿æ­é¢¨å»ºç¯‰èˆ‡æ£®æ—ã€‚è»Šç«™æ—å°±æ˜¯è¶…å¤§ Outletï¼ŒèˆŠè¼•äº•æ¾¤éŠ€åº§é€šé©åˆé¨è»Šæ¼«éŠã€‚", tips: "ä¸€å®šè¦åƒ Sawaya æœé†¬èˆ‡ Mikado æ‘©å¡éœœæ·‡æ·‹ã€‚" },
            { id: "shibuya", name: "SHIBUYA SKY", icon: "ğŸ™ï¸", tag: "é«˜ç©ºå¤œæ™¯", desc: "ç›®å‰æ±äº¬æœ€ç†±é–€çš„éœ²å¤©å±•æœ›å°ï¼Œ360åº¦ç„¡æ­»è§’ç¾æ™¯ã€‚è§’è½çš„ç»ç’ƒæ‰¶æ‰‹æ˜¯ç¶²ç¾å¿…æ‹é»ã€‚", tips: "æ—¥è½æ™‚æ®µæœ€ç¾ï¼Œä½†éœ€ææ—©ä¸€å€‹æœˆæ¶ç¥¨ã€‚" },
            { id: "shinjuku", name: "æ–°å®¿ 3D è²“", icon: "ğŸˆ", tag: "ç§‘æŠ€çœ‹æ¿", desc: "æ–°å®¿æ±å£å»£å ´å°é¢å¤§æ¨“çš„ 4K å½æ›²è¢å¹•ã€‚å·¨å¤§çš„ä¸‰èŠ±è²“æœƒæ¢é ­æ‰“æ‹›å‘¼ï¼Œéå¸¸é€¼çœŸå¯æ„›ã€‚", tips: "æ¯ 15 åˆ†é˜æœƒæœ‰ä¸€æ¬¡ç‰¹æ®Šæ¼”å‡ºã€‚" }
        ];

        const reservationData = [
            {
                category: "äº¤é€š",
                items: [
                    { name: "äº¬æˆ Skyliner", desc: "å¾€è¿”æˆç”°æ©Ÿå ´ï¼Œæœ€å¿«41åˆ†é˜ã€‚", url: "https://www.keisei.co.jp/keisei/tetudou/skyliner/e-ticket/zht/", tips: "ç·šä¸Šè²·ä¾¿å®œ", urgent: false },
                    { name: "JR æ–°å¹¹ç·š", desc: "å¾€è¼•äº•æ¾¤å¿…å‚™ã€‚", url: "https://www.eki-net.com/zh-CHT/jreast-train-reservation/Top/Index", tips: "1å€‹æœˆå‰é è¨‚", urgent: true }
                ]
            },
            {
                category: "æ™¯é»",
                items: [
                    { name: "SHIBUYA SKY", desc: "æ¾€è°·éœ²å¤©å±•æœ›å°ã€‚", url: "https://www.shibuya-scramble-square.com/sky/ticket/zh_tw/", tips: "4é€±å‰å¿…æ¶", urgent: true },
                    { name: "teamLab Planets", desc: "è±æ´²å…‰å½±å±•ã€‚", url: "https://planets.teamlab.art/tokyo/zh-hant/", tips: "å»ºè­°æå‰1å€‹æœˆ", urgent: true }
                ]
            },
            {
                category: "ç¾é£Ÿ",
                items: [
                    { name: "Pokemon Cafe", desc: "æ—¥æœ¬æ©‹åº—ã€‚", url: "https://www.pokemon-cafe.jp/reservation.html", tips: "31å¤©å‰18:00æ¶", urgent: true },
                    { name: "æŒ½è‚‰èˆ‡ç±³", desc: "æ¸‹è°·åº—ã€‚", url: "https://www.tablecheck.com/shops/hikinikutocome-shibuya/reserve", tips: "é€±äº”æ—©9é»æ¶", urgent: true }
                ]
            }
        ];

        const stationGuides = [
            { id: "narita", name: "æˆç”°æ©Ÿå ´T2", desc: "Skyliner èµ·é»", tips: [{ label: "æ­è»Š", text: "B1 æ¨“å±¤" }, { label: "è³¼ç¥¨", text: "è—è‰²æ«ƒæª¯" }], links: [{ title: "æ§‹å…§åœ– (JRæ±æ—¥æœ¬)", url: "https://www.jreast.co.jp/e/stations/e611.html" }, { title: "æ¨“å±¤æŒ‡å— (å®˜ç¶²)", url: "https://www.narita-airport.jp/ch2/map/?terminal=2&map=2" }] },
            { id: "ueno_jr", name: "JR ä¸Šé‡", desc: "å¾€è¼•äº•æ¾¤", tips: [{ label: "æ–°å¹¹ç·š", text: "èµ°ä¸­å¤®æ”¹æœ­" }, { label: "æœˆå°", text: "åœ°ä¸‹19-22" }], links: [{ title: "JR æ§‹å…§åœ–", url: "https://www.jreast.co.jp/estation/stations/204.html" }] },
            { id: "ueno_metro", name: "éŠ€åº§ç·š ç¨»è·ç”º", desc: "æœ€è¿‘è»Šç«™", tips: [{ label: "ä½ç½®", text: "åƒ…æ¨“æ¢¯" }, { label: "æ¨™èªŒ", text: "æ©˜è‰² G" }], links: [{ title: "æ§‹å…§åœ–", url: "https://www.tokyometro.jp/station/inaricho/index.html" }] },
            { id: "karuizawa", name: "è¼•äº•æ¾¤", desc: "Outlet", tips: [{ label: "Outlet", text: "å—å£" }, { label: "èˆŠè¼•äº•æ¾¤", text: "åŒ—å£" }], links: [{ title: "æ§‹å…§åœ–", url: "https://www.jreast.co.jp/estation/stations/518.html" }] },
            { id: "shibuya", name: "æ¸‹è°·", desc: "è¿·å®®", tips: [{ label: "éŠ€åº§ç·š", text: "3F" }, { label: "å…«å…¬", text: "1F æ”¹æœ­" }], links: [{ title: "ç«‹é«”åœ–", url: "https://www.tokyometro.jp/station/shibuya/index.html" }] },
            { id: "shinjuku", name: "æ–°å®¿", desc: "å¤§è¿·å®®", tips: [{ label: "3Dè²“", text: "æ±å£" }, { label: "å“¥å‰æ‹‰", text: "æ±å£å¾€æ­Œèˆä¼ç”º" }], links: [{ title: "æ§‹å…§åœ–", url: "https://www.jreast.co.jp/estation/stations/866.html" }] }
        ];

        const itineraryData = [
             { day: 1, date: "4/17 (äº”)", title: "æŠµé”èˆ‡éˆ´èŠ½çš„èµ·é»", events: [ { time: "13:25", title: "æŠµé”æˆç”°æ©Ÿå ´", desc: "T2", icon: "plane", location: "Narita International Airport Terminal 2", hideRoute: true }, { time: "14:30", title: "æ­ Skyliner", desc: "å¾€ä¸Šé‡", icon: "train", location: "Keisei Ueno Station", transport: { route: "æ©Ÿå ´ â†’ ä¸Šé‡", line: "Skyliner", time: "41åˆ†" } }, { time: "16:00", title: "Check-in", desc: "Stayme Ueno", icon: "bed", location: HOTEL_ADDRESS, transport: { route: "ä¸Šé‡ â†’ é£¯åº—", line: "è¨ˆç¨‹è»Š", time: "10åˆ†" } }, { time: "17:15", title: "å¾€ç¨»è·ç”ºç«™", desc: "æ­¥è¡Œ", icon: "walk", location: "Inaricho Station", transport: { route: "é£¯åº— â†’ ç¨»è·ç”º", line: "æ­¥è¡Œ", time: "5åˆ†" } }, { time: "17:30", title: "å¾¡èŒ¶ä¹‹æ°´ è–æ©‹", desc: "éˆ´èŠ½å ´æ™¯", icon: "camera", location: "Hijiri-bashi Bridge, Tokyo", transport: { route: "ç¨»è·ç”º â†’ å¾¡èŒ¶ä¹‹æ°´", line: "éŠ€åº§ç·š+JR", time: "15åˆ†" } }, { time: "18:30", title: "ç§‹è‘‰åŸ", desc: "é€›è¡—", icon: "shopping", location: "Akihabara Station", transport: { route: "å¾¡èŒ¶ä¹‹æ°´ â†’ ç§‹è‘‰åŸ", line: "æ­¥è¡Œ", time: "10åˆ†" } }, { time: "20:30", title: "è¿”å›é£¯åº—", desc: "ä¼‘æ¯", icon: "bed", location: HOTEL_ADDRESS, transport: { route: "ç§‹è‘‰åŸ â†’ é£¯åº—", line: "JR+æ­¥è¡Œ", time: "20åˆ†" } } ] },
             { day: 2, date: "4/18 (å…­)", title: "å°å ´é‹¼å½ˆ & è±æ´²", events: [ { time: "08:45", title: "å¾€ç¨»è·ç”ºç«™", desc: "å‡ºç™¼", icon: "walk", location: "Inaricho Station", transport: { route: "é£¯åº— â†’ ç¨»è·ç”º", line: "æ­¥è¡Œ", time: "5åˆ†" } }, { time: "09:00", title: "è±æ´²å¸‚å ´", desc: "æ—©åˆé¤", icon: "coffee", location: "Toyosu Market", transport: { route: "ç¨»è·ç”º â†’ è±æ´²", line: "éŠ€åº§ç·š+æœ‰æ¨‚ç”ºç·š", time: "30åˆ†" } }, { time: "11:30", title: "å¾€å°å ´", desc: "æµ·é·—è™Ÿ", icon: "train", location: "Daiba Station", transport: { route: "è±æ´² â†’ å°å ´", line: "æµ·é·—è™Ÿ", time: "20åˆ†" } }, { time: "13:00", title: "ç¨è§’ç¸é‹¼å½ˆ", desc: "è®Šèº«ç§€", icon: "camera", location: "Unicorn Gundam Statue" }, { time: "15:30", title: "teamLab", desc: "éœ€é ç´„", icon: "camera", location: "teamLab Planets TOKYO", transport: { route: "å°å ´ â†’ æ–°è±æ´²", line: "æµ·é·—è™Ÿ", time: "23åˆ†" } }, { time: "18:00", title: "Kua'Aina", desc: "æ™šé¤", icon: "coffee", location: "Kua Aina Aqua City Odaiba", transport: { route: "æ–°è±æ´² â†’ å°å ´", line: "æµ·é·—è™Ÿ", time: "15åˆ†" } }, { time: "20:00", title: "è¿”å›é£¯åº—", desc: "ä¼‘æ¯", icon: "bed", location: HOTEL_ADDRESS, transport: { route: "å°å ´ â†’ ç¨»è·ç”º", line: "æµ·é·—è™Ÿ+éŠ€åº§ç·š", time: "45åˆ†" } } ] },
             { day: 3, date: "4/19 (æ—¥)", title: "æ·ºè‰èˆ‡æ™´ç©ºå¡”", events: [ { time: "08:45", title: "å¾€ç¨»è·ç”ºç«™", desc: "å‡ºç™¼", icon: "walk", location: "Inaricho Station", transport: { route: "é£¯åº— â†’ ç¨»è·ç”º", line: "æ­¥è¡Œ", time: "5åˆ†" } }, { time: "09:00", title: "æ·ºè‰å¯º", desc: "é›·é–€", icon: "camera", location: "Senso-ji", transport: { route: "ç¨»è·ç”º â†’ æ·ºè‰", line: "éŠ€åº§ç·š", time: "3åˆ†" } }, { time: "11:00", title: "éš…ç”°å·æ­¥é“", desc: "æ•£æ­¥", icon: "walk", location: "Sumida River Walk", transport: { route: "æ·ºè‰ â†’ æ™´ç©ºå¡”", line: "æ­¥è¡Œ", time: "20åˆ†" } }, { time: "12:30", title: "æ™´ç©ºå¡”å¯¶å¯å¤¢", desc: "4F", icon: "shopping", location: "Pokemon Center Skytree Town" }, { time: "17:00", title: "åˆ©ä¹…ç‰›èˆŒ", desc: "æ™šé¤", icon: "coffee", location: "Rikyu Skytree" }, { time: "19:00", title: "è¿”å›é£¯åº—", desc: "å›ç¨‹", icon: "bed", location: HOTEL_ADDRESS, transport: { route: "æŠ¼ä¸Š â†’ ç¨»è·ç”º", line: "æ·ºè‰ç·š+éŠ€åº§ç·š", time: "20åˆ†" } } ] },
             { day: 4, date: "4/20 (ä¸€)", title: "è¼•äº•æ¾¤ä¸€æ—¥éŠ", events: [ { time: "09:00", title: "å¾€ä¸Šé‡ç«™", desc: "æ­æ–°å¹¹ç·š", icon: "walk", location: "Ueno Station", transport: { route: "é£¯åº— â†’ ä¸Šé‡", line: "æ­¥è¡Œ", time: "10åˆ†" } }, { time: "10:10", title: "æŠµé”è¼•äº•æ¾¤", desc: "Outlet", icon: "shopping", location: "Karuizawa Prince Shopping Plaza", transport: { route: "ä¸Šé‡ â†’ è¼•äº•æ¾¤", line: "æ–°å¹¹ç·š", time: "60åˆ†" } }, { time: "14:00", title: "èˆŠè¼•äº•æ¾¤", desc: "é¨è»Š", icon: "camera", location: "Kyu-Karuizawa Ginza Street", transport: { route: "è»Šç«™ â†’ èˆŠè¼•äº•æ¾¤", line: "å·´å£«/å–®è»Š", time: "15åˆ†" } }, { time: "17:30", title: "è¿”å›ä¸Šé‡", desc: "å›ç¨‹", icon: "train", location: "Ueno Station", transport: { route: "è¼•äº•æ¾¤ â†’ ä¸Šé‡", line: "æ–°å¹¹ç·š", time: "60åˆ†" } }, { time: "19:00", title: "é´¨ to è”¥", desc: "æ™šé¤", icon: "coffee", location: "Kamo to Negi Ueno" }, { time: "20:00", title: "è¿”å›é£¯åº—", desc: "æ­¥è¡Œ", icon: "bed", location: HOTEL_ADDRESS, transport: { route: "ä¸Šé‡ â†’ é£¯åº—", line: "æ­¥è¡Œ", time: "10åˆ†" } } ] },
             { day: 5, date: "4/21 (äºŒ)", title: "ç¯‰åœ°ãƒ»æ¸‹è°·ãƒ»æ–°å®¿", events: [ { time: "08:40", title: "å¾€ç¨»è·ç”ºç«™", desc: "å‡ºç™¼", icon: "walk", location: "Inaricho Station", transport: { route: "é£¯åº— â†’ è»Šç«™", line: "æ­¥è¡Œ", time: "5åˆ†" } }, { time: "09:00", title: "ç¯‰åœ°å ´å¤–å¸‚å ´", desc: "æ—©é¤", icon: "coffee", location: "Tsukiji Outer Market", transport: { route: "ç¨»è·ç”º â†’ ç¯‰åœ°", line: "éŠ€åº§ç·š+æ—¥æ¯”è°·ç·š", time: "20åˆ†" } }, { time: "12:00", title: "æ¸‹è°· PARCO", desc: "å¯¶å¯å¤¢", icon: "shopping", location: "Shibuya PARCO", transport: { route: "ç¯‰åœ° â†’ æ¸‹è°·", line: "æ—¥æ¯”è°·ç·š+éŠ€åº§ç·š", time: "25åˆ†" } }, { time: "15:00", title: "SHIBUYA SKY", desc: "éœ€é ç´„", icon: "camera", location: "SHIBUYA SKY" }, { time: "17:30", title: "æ–°å®¿ 3Dè²“", desc: "æ±å£", icon: "camera", location: "Cross Shinjuku Vision", transport: { route: "æ¸‹è°· â†’ æ–°å®¿", line: "å±±æ‰‹ç·š", time: "7åˆ†" } }, { time: "18:30", title: "å“¥å‰æ‹‰", desc: "æ™šé¤", icon: "camera", location: "Godzilla Head Shinjuku", transport: { route: "æ–°å®¿ â†’ æ­Œèˆä¼ç”º", line: "æ­¥è¡Œ", time: "10åˆ†" } }, { time: "20:30", title: "è¿”å›é£¯åº—", desc: "å›ç¨‹", icon: "bed", location: HOTEL_ADDRESS, transport: { route: "æ–°å®¿ â†’ ç¨»è·ç”º", line: "ä¸­å¤®ç·š+éŠ€åº§ç·š", time: "30åˆ†" } } ] },
             { day: 6, date: "4/22 (ä¸‰)", title: "è¿”å°", events: [ { time: "10:00", title: "Check-out", desc: "é˜¿ç¾æ©«ä¸", icon: "shopping", location: "Ameyoko Shopping Street", transport: { route: "é£¯åº— â†’ é˜¿ç¾æ©«ä¸", line: "æ­¥è¡Œ", time: "10åˆ†" } }, { time: "11:30", title: "å¾€æ©Ÿå ´", desc: "æ­ Skyliner", icon: "train", location: "Keisei Ueno Station", transport: { route: "äº¬æˆä¸Šé‡ â†’ æ©Ÿå ´", line: "Skyliner", time: "41åˆ†" } }, { time: "12:25", title: "æŠµé”æ©Ÿå ´", desc: "æˆç”° T2", icon: "plane", location: "Narita Airport Terminal 2" }, { time: "14:25", title: "èµ·é£›è¿”å°", desc: "é•·æ¦® BR197", icon: "plane", location: "", transport: "" } ] }
        ];

        // --- 4. çµ„ä»¶å®šç¾©å€ ---

        // æ™¯é»åœ°åœ– (ç›´æ¥åµŒå…¥ç‰ˆ - ä¾ç…§æ‚¨æä¾›çš„åœ–ç‰‡é‡ç¹ª)
        const AttractionsMap = () => (
            <div className="w-full h-auto bg-blue-50 rounded-xl overflow-hidden shadow-inner border-2 border-blue-100 p-2 relative">
                <svg viewBox="0 0 400 700" xmlns="http://www.w3.org/2000/svg" className="w-full h-auto">
                    {/* Background */}
                    <rect width="400" height="700" fill="#e0f2fe" opacity="0.3" />
                    
                    {/* Title */}
                    <text x="200" y="40" textAnchor="middle" fontSize="24" fontWeight="bold" fill="#333">æ±äº¬6æ—¥è¦ªå­å†’éšªåœ°åœ–</text>

                    {/* Central Hub: Ueno (Colorful Circle) */}
                    <g transform="translate(200, 350)">
                        <circle r="65" fill="white" stroke="#333" strokeWidth="2" />
                        
                        {/* Colorful Border Segments */}
                        <path d="M -60 0 A 60 60 0 0 1 0 -60" fill="none" stroke="#22c55e" strokeWidth="8" /> {/* Green - Top Left */}
                        <path d="M 0 -60 A 60 60 0 0 1 60 0" fill="none" stroke="#ef4444" strokeWidth="8" /> {/* Red - Top Right */}
                        <path d="M 60 0 A 60 60 0 0 1 0 60" fill="none" stroke="#3b82f6" strokeWidth="8" /> {/* Blue - Bottom Right */}
                        <path d="M 0 60 A 60 60 0 0 1 -60 0" fill="none" stroke="#eab308" strokeWidth="8" /> {/* Yellow - Bottom Left */}

                        <text y="-10" textAnchor="middle" fontSize="16" fontWeight="bold" fill="#333">ä½å®¿åŸºåœ°ï¼š</text>
                        <text y="15" textAnchor="middle" fontSize="22" fontWeight="bold" fill="#333">ä¸Šé‡</text>
                        <text y="35" textAnchor="middle" fontSize="10" fill="#666">é„°è¿‘éŠ€åº§ç·šèˆ‡JRç«™</text>
                        <text y="50" textAnchor="middle" fontSize="10" fill="#666">å®Œç¾å‡ºç™¼é»</text>
                    </g>

                    {/* 1. Karuizawa (Top Left - Green) */}
                    <path d="M 170 300 Q 150 250 100 150" fill="none" stroke="#22c55e" strokeWidth="12" strokeLinecap="round" />
                    <g transform="translate(100, 150)">
                        <rect x="-90" y="-60" width="180" height="100" rx="15" fill="white" stroke="#22c55e" strokeWidth="3" />
                        <text x="0" y="-35" textAnchor="middle" fontSize="16" fontWeight="bold" fill="#333">è¼•äº•æ¾¤ï¼š</text>
                        <text x="0" y="-15" textAnchor="middle" fontSize="14" fontWeight="bold" fill="#333">æ–°å¹¹ç·šè¿‘éƒŠä¸€æ—¥éŠ</text>
                        <text x="-40" y="20" fontSize="24">ğŸš…</text>
                        <text x="0" y="20" fontSize="24">ğŸ›ï¸</text>
                        <text x="40" y="20" fontSize="24">ğŸš²</text>
                    </g>

                    {/* 2. Asakusa & Skytree (Top Right - Red) */}
                    <path d="M 230 300 Q 250 250 300 150" fill="none" stroke="#ef4444" strokeWidth="12" strokeLinecap="round" />
                    <g transform="translate(300, 150)">
                        <rect x="-90" y="-60" width="180" height="100" rx="15" fill="white" stroke="#ef4444" strokeWidth="3" />
                        <text x="0" y="-35" textAnchor="middle" fontSize="16" fontWeight="bold" fill="#333">æ·ºè‰ & æ™´ç©ºå¡”ï¼š</text>
                        <text x="0" y="-15" textAnchor="middle" fontSize="14" fontWeight="bold" fill="#333">å‚³çµ±èˆ‡å‹•æ¼«</text>
                        <text x="-40" y="20" fontSize="24">â›©ï¸</text>
                        <text x="0" y="20" fontSize="24">ğŸ®</text>
                        <text x="40" y="20" fontSize="24">ğŸ—¼</text>
                    </g>

                    {/* 3. Shibuya & Shinjuku (Bottom Left - Yellow) */}
                    <path d="M 170 400 Q 150 450 100 550" fill="none" stroke="#eab308" strokeWidth="12" strokeLinecap="round" />
                    <g transform="translate(100, 550)">
                        <rect x="-90" y="-60" width="180" height="100" rx="15" fill="white" stroke="#eab308" strokeWidth="3" />
                        <text x="0" y="-35" textAnchor="middle" fontSize="16" fontWeight="bold" fill="#333">æ¶‰è°· & æ–°å®¿ï¼š</text>
                        <text x="0" y="-15" textAnchor="middle" fontSize="14" fontWeight="bold" fill="#333">æ½®æµä¸­å¿ƒ</text>
                        <text x="-40" y="20" fontSize="24">ğŸ™ï¸</text>
                        <text x="0" y="20" fontSize="24">ğŸ®</text>
                        <text x="40" y="20" fontSize="24">âš¡</text>
                    </g>

                    {/* 4. Odaiba & Toyosu (Bottom Right - Blue) */}
                    <path d="M 230 400 Q 250 450 300 550" fill="none" stroke="#3b82f6" strokeWidth="12" strokeLinecap="round" />
                    <g transform="translate(300, 550)">
                        <rect x="-90" y="-60" width="180" height="100" rx="15" fill="white" stroke="#3b82f6" strokeWidth="3" />
                        <text x="0" y="-35" textAnchor="middle" fontSize="16" fontWeight="bold" fill="#333">å°å ´ & è±æ´²ï¼š</text>
                        <text x="0" y="-15" textAnchor="middle" fontSize="14" fontWeight="bold" fill="#333">æœªä¾†æ„Ÿé«”é©—</text>
                        <text x="-40" y="20" fontSize="24">ğŸ¤–</text>
                        <text x="0" y="20" fontSize="24">âœ¨</text>
                        <text x="40" y="20" fontSize="24">ğŸ£</text>
                    </g>

                </svg>
            </div>
        );

        // æ–°å¢ï¼šæ™¯é»å‘¨é‚Šåœ°åœ–çµ„ä»¶
        const SurroundingAreaMap = () => {
            const [area, setArea] = useState('ueno');

            const areas = [
                { id: 'ueno', name: 'ä¸Šé‡' },
                { id: 'karuizawa', name: 'è¼•äº•æ¾¤' },
                { id: 'odaiba', name: 'å°å ´' },
                { id: 'asakusa', name: 'æ·ºè‰' }
            ];

            const renderMap = () => {
                switch(area) {
                    case 'ueno':
                        return (
                            <svg viewBox="0 0 300 300" className="w-full h-auto bg-white border rounded">
                                <rect width="300" height="300" fill="#f0fdf4" />
                                {/* Ueno Park */}
                                <rect x="20" y="20" width="150" height="180" fill="#bbf7d0" rx="10" />
                                <text x="95" y="110" textAnchor="middle" fontSize="14" fill="#166534">ä¸Šé‡å…¬åœ’ (å‹•ç‰©åœ’)</text>
                                {/* Station */}
                                <rect x="180" y="100" width="80" height="150" fill="#e5e7eb" stroke="#374151" />
                                <text x="220" y="180" textAnchor="middle" fontSize="14">JR ä¸Šé‡ç«™</text>
                                {/* Ameyoko */}
                                <path d="M 190 260 L 190 290" stroke="#f59e0b" strokeWidth="8" strokeLinecap="round" />
                                <text x="210" y="280" fontSize="10">é˜¿ç¾æ©«ä¸</text>
                                {/* Inaricho (Hotel) */}
                                <circle cx="280" cy="150" r="8" fill="#ef4444" />
                                <text x="280" y="170" textAnchor="middle" fontSize="10" fill="#ef4444">ç¨»è·ç”º(é£¯åº—)</text>
                                <path d="M 270 150 L 260 150" stroke="#ef4444" strokeWidth="2" strokeDasharray="4" />
                            </svg>
                        );
                    case 'karuizawa':
                        return (
                            <svg viewBox="0 0 300 300" className="w-full h-auto bg-white border rounded">
                                <rect width="300" height="300" fill="#eff6ff" />
                                {/* Station */}
                                <rect x="50" y="130" width="200" height="40" fill="#e5e7eb" stroke="#374151" />
                                <text x="150" y="155" textAnchor="middle" fontSize="14">è¼•äº•æ¾¤ç«™</text>
                                {/* Outlet */}
                                <rect x="50" y="180" width="200" height="100" fill="#fef08a" rx="10" />
                                <text x="150" y="230" textAnchor="middle" fontSize="16" fill="#854d0e">ç‹å­ Outlet</text>
                                {/* North */}
                                <path d="M 150 130 L 150 50" stroke="#9ca3af" strokeWidth="4" />
                                <text x="150" y="40" textAnchor="middle" fontSize="12">å¾€ èˆŠè¼•äº•æ¾¤ (ç´„1.5km)</text>
                                <text x="160" y="80" textAnchor="start" fontSize="10">ğŸš² å»ºè­°é¨è»Š</text>
                            </svg>
                        );
                    case 'odaiba':
                        return (
                            <svg viewBox="0 0 300 300" className="w-full h-auto bg-white border rounded">
                                <rect width="300" height="300" fill="#e0f2fe" />
                                {/* Land */}
                                <path d="M 0 100 Q 150 120 300 100 L 300 300 L 0 300 Z" fill="#f3f4f6" />
                                {/* Yurikamome */}
                                <path d="M 0 150 Q 150 170 300 150" fill="none" stroke="#3b82f6" strokeWidth="6" strokeDasharray="5" />
                                <circle cx="150" cy="160" r="6" fill="white" stroke="#3b82f6" strokeWidth="2" />
                                <text x="150" y="180" textAnchor="middle" fontSize="10">å°å ´ç«™</text>
                                {/* Gundam */}
                                <text x="200" y="220" fontSize="30">ğŸ¤–</text>
                                <text x="200" y="250" textAnchor="middle" fontSize="12">é‹¼å½ˆ (DiverCity)</text>
                                {/* Aqua City */}
                                <rect x="80" y="190" width="60" height="40" fill="#bae6fd" />
                                <text x="110" y="215" textAnchor="middle" fontSize="10">Aqua City</text>
                            </svg>
                        );
                    case 'asakusa':
                        return (
                            <svg viewBox="0 0 300 300" className="w-full h-auto bg-white border rounded">
                                <rect width="300" height="300" fill="#fff7ed" />
                                {/* Kaminarimon */}
                                <rect x="130" y="220" width="40" height="30" fill="#ef4444" />
                                <text x="150" y="265" textAnchor="middle" fontSize="12">é›·é–€</text>
                                {/* Nakamise */}
                                <path d="M 150 220 L 150 120" stroke="#fdba74" strokeWidth="10" />
                                <text x="170" y="170" fontSize="10" writingMode="tb">ä»²è¦‹ä¸–é€š</text>
                                {/* Sensoji */}
                                <rect x="110" y="50" width="80" height="60" fill="#ef4444" />
                                <text x="150" y="85" textAnchor="middle" fontSize="14" fill="white">æ·ºè‰å¯º</text>
                                {/* River */}
                                <path d="M 250 0 L 250 300" stroke="#3b82f6" strokeWidth="20" opacity="0.5" />
                                <text x="250" y="150" textAnchor="middle" fontSize="12" fill="#1e3a8a" writingMode="tb">éš…ç”°å·</text>
                                {/* Skytree Direction */}
                                <text x="280" y="50" fontSize="20">ğŸ—¼</text>
                                <text x="280" y="70" textAnchor="middle" fontSize="8">å¾€æ™´ç©ºå¡”</text>
                            </svg>
                        );
                    default: return null;
                }
            };

            return (
                <div className="w-full">
                    <div className="flex gap-2 mb-4 overflow-x-auto pb-2">
                        {areas.map(a => (
                            <button
                                key={a.id}
                                onClick={() => setArea(a.id)}
                                className={`px-3 py-1 rounded-full text-xs font-bold whitespace-nowrap transition-colors ${area === a.id ? 'bg-indigo-600 text-white' : 'bg-white text-gray-600 border border-gray-200'}`}
                            >
                                {a.name}
                            </button>
                        ))}
                    </div>
                    <div className="relative">
                        {renderMap()}
                        <div className="absolute top-2 right-2 bg-white/80 px-2 py-1 rounded text-[10px] text-gray-500 backdrop-blur">
                            ç¤ºæ„åœ–
                        </div>
                    </div>
                </div>
            );
        };

        // åœ°éµæŒ‡å¼•åœ–çµ„ä»¶
        const MetroMap = () => (
            <div className="w-full h-auto bg-gray-900 rounded-xl overflow-hidden shadow-inner border-2 border-gray-700 p-4 relative">
                <h3 className="text-white text-center mb-2 text-sm font-bold">ç²¾ç°¡ç‰ˆè¡Œç¨‹äº¤é€šåœ–</h3>
                <svg viewBox="0 0 400 500" xmlns="http://www.w3.org/2000/svg" className="w-full h-auto">
                    <g transform="translate(10, 10)">
                        <rect width="130" height="70" fill="rgba(0,0,0,0.7)" rx="5" />
                        <line x1="10" y1="15" x2="40" y2="15" stroke="#f97316" strokeWidth="4" /> <text x="50" y="18" fill="white" fontSize="10">éŠ€åº§ç·š (G)</text>
                        <line x1="10" y1="30" x2="40" y2="30" stroke="#84cc16" strokeWidth="4" /> <text x="50" y="33" fill="white" fontSize="10">JR å±±æ‰‹ç·š</text>
                        <line x1="10" y1="45" x2="40" y2="45" stroke="#3b82f6" strokeWidth="4" /> <text x="50" y="48" fill="white" fontSize="10">ç™¾åˆæµ·é·—è™Ÿ</text>
                        <line x1="10" y1="60" x2="40" y2="60" stroke="#ef4444" strokeWidth="4" /> <text x="50" y="63" fill="white" fontSize="10">æ·ºè‰ç·š (A)</text>
                    </g>
                    <rect x="80" y="150" width="240" height="200" rx="30" fill="none" stroke="#84cc16" strokeWidth="8" opacity="0.8" />
                    <path d="M 60 400 L 280 150 L 350 150" fill="none" stroke="#f97316" strokeWidth="6" />
                    <path d="M 280 350 L 300 450 L 380 450" fill="none" stroke="#3b82f6" strokeWidth="6" />
                    <circle cx="290" cy="150" className="metro-station" stroke="#f97316" />
                    <text x="290" y="135" textAnchor="middle" fill="white" fontSize="12" fontWeight="bold">ç¨»è·ç”º(ä½å®¿)</text>
                    <circle cx="260" cy="150" className="metro-station" stroke="#84cc16" />
                    <text x="250" y="170" textAnchor="end" fill="white" fontSize="12">ä¸Šé‡</text>
                    <circle cx="350" cy="150" className="metro-station" stroke="#ef4444" />
                    <text x="350" y="180" textAnchor="middle" fill="white" fontSize="12">æ·ºè‰</text>
                    <circle cx="260" cy="200" className="metro-station" stroke="#84cc16" />
                    <text x="245" y="205" textAnchor="end" fill="white" fontSize="12">ç§‹è‘‰åŸ</text>
                    <circle cx="240" cy="250" className="metro-station" stroke="#84cc16" />
                    <text x="225" y="255" textAnchor="end" fill="white" fontSize="12">æ±äº¬</text>
                    <circle cx="200" cy="350" className="metro-station" stroke="#84cc16" />
                    <text x="190" y="365" textAnchor="end" fill="white" fontSize="12">æ–°æ©‹</text>
                    <text x="240" y="340" textAnchor="start" fill="#3b82f6" fontSize="10">è½‰ä¹˜ç™¾åˆæµ·é·—â†’</text>
                    <circle cx="80" cy="320" className="metro-station" stroke="#84cc16" />
                    <text x="70" y="325" textAnchor="end" fill="white" fontSize="12">æ¸‹è°·</text>
                    <circle cx="80" cy="200" className="metro-station" stroke="#84cc16" />
                    <text x="70" y="205" textAnchor="end" fill="white" fontSize="12">æ–°å®¿</text>
                    <circle cx="340" cy="450" className="metro-station" stroke="#3b82f6" />
                    <text x="340" y="475" textAnchor="middle" fill="white" fontSize="12">å°å ´</text>
                </svg>
            </div>
        );

        const TravelMapContainer = () => {
            const [mapType, setMapType] = useState('attraction'); // attraction, metro, full_metro, surrounding

            return (
                <div className="w-full h-full bg-blue-50/30 overflow-y-auto flex flex-col items-center p-4 pb-24">
                    <div className="bg-white p-2 rounded-xl shadow-md flex gap-2 mb-4 overflow-x-auto max-w-full w-full">
                        <button onClick={() => setMapType('attraction')} className={`flex-shrink-0 px-3 py-2 rounded-lg text-xs font-bold whitespace-nowrap transition-colors ${mapType === 'attraction' ? 'bg-indigo-600 text-white' : 'bg-gray-100 text-gray-600'}`}>ğŸ—ºï¸ å…¨è¦½</button>
                        <button onClick={() => setMapType('surrounding')} className={`flex-shrink-0 px-3 py-2 rounded-lg text-xs font-bold whitespace-nowrap transition-colors ${mapType === 'surrounding' ? 'bg-teal-600 text-white' : 'bg-gray-100 text-gray-600'}`}>ğŸ™ï¸ æ™¯é»å‘¨é‚Š</button>
                        <button onClick={() => setMapType('metro')} className={`flex-shrink-0 px-3 py-2 rounded-lg text-xs font-bold whitespace-nowrap transition-colors ${mapType === 'metro' ? 'bg-gray-800 text-white' : 'bg-gray-100 text-gray-600'}`}>ğŸš‡ è·¯ç·š</button>
                        <button onClick={() => setMapType('full_metro')} className={`flex-shrink-0 px-3 py-2 rounded-lg text-xs font-bold whitespace-nowrap transition-colors ${mapType === 'full_metro' ? 'bg-orange-600 text-white' : 'bg-gray-100 text-gray-600'}`}>ğŸ“‘ åœ°éµåœ–</button>
                    </div>
                    <div className="w-full max-w-sm flex-1">
                        {mapType === 'attraction' && <AttractionsMap />}
                        {mapType === 'surrounding' && <SurroundingAreaMap />}
                        {mapType === 'metro' && <MetroMap />}
                        {mapType === 'full_metro' && (
                             <div className="w-full h-auto bg-white rounded-xl overflow-hidden shadow-inner border-2 border-gray-200 p-1">
                                <div className="overflow-auto h-[60vh]">
                                    <img src="https://www.bubu-jp.com/wp-content/uploads/2019/02/73585d315d861d4ec85a304c947ec7c9.jpg" alt="Tokyo Subway Map" className="w-full h-auto min-w-[200%] object-contain" />
                                </div>
                                <p className="text-[10px] text-gray-400 text-center p-2">åœ–ç‰‡ä¾†æºï¼šbubu-jp.com (éœ€ç¶²è·¯è¼‰å…¥)</p>
                             </div>
                        )}
                        {mapType !== 'full_metro' && mapType !== 'surrounding' && (
                            <div className="mt-4 bg-white p-4 rounded-xl shadow-sm">
                                <h4 className="font-bold text-gray-700 mb-2 text-sm">ğŸ’¡ åœ°åœ–ä½¿ç”¨å°æ’‡æ­¥</h4>
                                <ul className="text-xs text-gray-500 space-y-1 list-disc list-inside">
                                    {mapType === 'attraction' ? (
                                        <>
                                            <li>ä½å®¿åŸºåœ° <span className="font-bold text-indigo-600">ä¸Šé‡</span> ä½æ–¼ä¸­å¿ƒã€‚</li>
                                            <li>è·Ÿè‘—é¡è‰²ç·šæ¢å‰å¾€ä¸åŒä¸»é¡Œå€ï¼</li>
                                        </>
                                    ) : (
                                        <>
                                            <li><span className="text-orange-500 font-bold">æ©˜è‰²éŠ€åº§ç·š</span> æ˜¯æ‚¨å›å®¶çš„è·¯ã€‚</li>
                                            <li>å»å°å ´è¦åœ¨ <span className="font-bold">æ–°æ©‹</span> è½‰ä¹˜ã€‚</li>
                                        </>
                                    )}
                                </ul>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const AttractionGuide = () => (
            <div className="p-4 space-y-6 animate-fade-in pb-24">
                <div className="text-center mb-4">
                    <h2 className="text-xl font-bold text-gray-800">æ™¯é»ç™¾ç§‘</h2>
                    <p className="text-indigo-600 text-sm">æ¢ç´¢æ±äº¬å¿…å»äº®é»</p>
                </div>
                <div className="grid gap-4">
                    {attractionInfos.map(item => (
                        <div key={item.id} className="bg-white rounded-xl shadow-sm overflow-hidden border border-gray-100">
                            <div className="h-32 bg-gray-100 relative flex items-center justify-center">
                                 <div className="text-5xl">{item.icon}</div>
                                 <div className="absolute top-2 right-2 bg-indigo-600/80 text-white text-xs px-2 py-1 rounded-full backdrop-blur-sm">
                                    {item.tag}
                                 </div>
                            </div>
                            <div className="p-4">
                                <h3 className="font-bold text-lg text-gray-800 mb-2">{item.name}</h3>
                                <p className="text-sm text-gray-600 mb-3 leading-relaxed">{item.desc}</p>
                                <div className="bg-yellow-50 text-yellow-800 text-xs p-3 rounded-lg border border-yellow-100">
                                    ğŸ’¡ <span className="font-bold">è²¼å¿ƒæç¤ºï¼š</span>{item.tips}
                                </div>
                            </div>
                        </div>
                    ))}
                </div>
            </div>
        );

        const StationGuide = () => (
            <div className="p-4 space-y-4 animate-fade-in pb-24">
                 <div className="text-center mb-6"><h2 className="text-xl font-bold text-gray-800">è»Šç«™èˆ‡æœˆå°æ”»ç•¥</h2><p className="text-indigo-600 text-sm">è¿·è·¯æ•‘æ˜Ÿ</p></div>
                {stationGuides.map((station) => (
                    <div key={station.id} className="bg-white border border-gray-100 rounded-2xl p-5 shadow-sm">
                        <h3 className="font-bold text-lg text-gray-800 flex items-center gap-2"><span className="w-2 h-6 bg-indigo-500 rounded-full"></span>{station.name}</h3>
                        <p className="text-sm text-gray-500 mb-4 ml-4">{station.desc}</p>
                        <div className="space-y-3 mb-4">{station.tips.map((tip, idx) => (<div key={idx} className="flex gap-3 bg-gray-50 p-3 rounded-lg text-sm"><span className="bg-white text-indigo-600 border border-indigo-100 text-xs font-bold px-2 py-1 h-fit rounded whitespace-nowrap">{tip.label}</span><span className="text-gray-700 leading-relaxed">{tip.text}</span></div>))}</div>
                        {station.links && station.links.length > 0 && (<div className="flex flex-wrap gap-2 mt-2">{station.links.map((link, lIdx) => (<a key={lIdx} href={link.url} target="_blank" rel="noopener noreferrer" className="flex items-center gap-1.5 text-xs font-bold text-indigo-600 bg-indigo-50 hover:bg-indigo-100 px-3 py-2 rounded-full transition-colors no-underline"><ExternalLinkIcon className="w-3 h-3" /> {link.title}</a>))}</div>)}
                    </div>
                ))}
            </div>
        );

        const ReservationPage = () => (
            <div className="p-4 space-y-6 animate-fade-in pb-24">
                <div className="text-center mb-4"><h2 className="text-xl font-bold text-gray-800">é ç´„ç®¡å®¶</h2><p className="text-indigo-600 text-sm">é»æ“ŠæŒ‰éˆ•ç›´é”é ç´„é é¢</p></div>
                {reservationData.map((section, idx) => (
                    <div key={idx}>
                        <h3 className="text-lg font-bold text-gray-700 mb-3 ml-1 flex items-center"><span className="w-1 h-5 bg-indigo-500 mr-2 rounded-full"></span>{section.category}</h3>
                        <div className="space-y-4">
                            {section.items.map((item, itemIdx) => (
                                <div key={itemIdx} className="bg-white border border-gray-100 rounded-2xl p-4 shadow-sm relative overflow-hidden">
                                    {item.urgent && <div className="absolute top-0 right-0 bg-red-100 text-red-600 text-[10px] font-bold px-2 py-1 rounded-bl-lg">éœ€æå‰é ç´„</div>}
                                    <div className="flex justify-between items-start mb-2"><div><h4 className="font-bold text-gray-800 text-base">{item.name}</h4><p className="text-xs text-gray-500 mt-1">{item.desc}</p></div></div>
                                    <div className="bg-orange-50 border border-orange-100 rounded-lg p-2 mb-3"><p className="text-xs text-orange-700 flex items-start gap-1"><span className="shrink-0">ğŸ’¡</span>{item.tips}</p></div>
                                    <a href={item.url} target="_blank" rel="noopener noreferrer" className="w-full flex items-center justify-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-bold py-2.5 rounded-xl transition-colors no-underline"><TicketIcon className="w-4 h-4" /> å‰å¾€é ç´„</a>
                                </div>
                            ))}
                        </div>
                    </div>
                ))}
            </div>
        );

        const App = () => {
            const [view, setView] = useState('list');
            const [activeDay, setActiveDay] = useState(0);

            useEffect(() => {
                const loadingEl = document.getElementById('loading');
                if (loadingEl) loadingEl.style.display = 'none';
            }, []);

            const getMapUrl = (query) => `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(query)}`;
            const getDirUrl = (destination, origin) => {
                let url = `https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(destination)}&travelmode=transit`;
                if (origin) url += `&origin=${encodeURIComponent(origin)}`;
                return url;
            };

            return (
                <div className="max-w-md mx-auto bg-white min-h-screen shadow-2xl overflow-hidden relative pb-24 safe-bottom flex flex-col">
                    <div className="bg-indigo-600 text-white p-5 pt-12 rounded-b-3xl shadow-lg sticky top-0 z-20 flex-shrink-0">
                        <div className="flex justify-between items-start">
                            <div><h1 className="text-2xl font-bold">æ±äº¬è¦ªå­ä¹‹æ—…</h1><p className="text-indigo-100 text-sm mt-1">4/17 - 4/22 â€¢ 6å¤©5å¤œ</p></div>
                        </div>
                        <a href={getMapUrl(HOTEL_ADDRESS)} target="_blank" rel="noopener noreferrer" className="mt-4 bg-indigo-700/50 p-3 rounded-xl flex items-center gap-3 backdrop-blur-sm active:scale-95 transition-transform border border-indigo-500/30 text-left">
                            <div className="bg-white p-2 rounded-full text-indigo-600"><HomeIcon className="w-5 h-5" /></div>
                            <div className="flex-1 min-w-0"><p className="text-xs text-indigo-200 uppercase font-semibold">ä½å®¿</p><p className="font-bold text-sm truncate text-white">Stayme THE HOTEL Ueno</p></div>
                            <NavigationIcon className="w-5 h-5 text-indigo-200" />
                        </a>
                    </div>

                    <div className="flex-1 overflow-y-auto hide-scrollbar bg-gray-50">
                        {view === 'list' && (
                            <>
                                <div className="sticky top-0 z-10 bg-white/95 backdrop-blur shadow-sm border-b">
                                    <div className="flex overflow-x-auto hide-scrollbar p-2 gap-2 snap-x">
                                        {itineraryData.map((day, index) => (
                                            <button key={index} onClick={() => setActiveDay(index)} className={`flex-shrink-0 snap-center px-4 py-2 rounded-full text-sm font-bold transition-all ${activeDay === index ? 'bg-indigo-600 text-white shadow-md transform scale-105' : 'bg-gray-100 text-gray-500'}`}>Day {day.day}</button>
                                        ))}
                                    </div>
                                </div>
                                <div className="p-4 space-y-6 animate-fade-in pb-24">
                                    <div className="text-center mb-4"><h2 className="text-xl font-bold text-gray-800">{itineraryData[activeDay].date}</h2><p className="text-indigo-600 font-medium">{itineraryData[activeDay].title}</p></div>
                                    <div className="relative pl-4 space-y-8">
                                        <div className="absolute left-[27px] top-4 bottom-4 w-0.5 bg-gray-200"></div>
                                        {itineraryData[activeDay].events.map((event, idx) => {
                                            let prevLocation;
                                            if (activeDay === 0) {
                                                if (idx === 0) prevLocation = null;
                                                else if (idx === 1) prevLocation = itineraryData[0].events[0].location;
                                                else if (idx === 2) prevLocation = itineraryData[0].events[1].location;
                                                else if (idx === 3) prevLocation = HOTEL_ADDRESS;
                                                else prevLocation = itineraryData[0].events[idx-1].location;
                                            } else {
                                                prevLocation = idx === 0 ? HOTEL_ADDRESS : itineraryData[activeDay].events[idx-1].location;
                                            }
                                            return (
                                                <div key={idx} className="relative flex gap-4 group">
                                                    <div className="relative z-10 flex-shrink-0"><div className="w-12 h-12 rounded-full bg-white border-2 border-indigo-100 shadow-sm flex items-center justify-center text-indigo-500"><IconComponent name={event.icon} className="w-6 h-6" /></div></div>
                                                    <div className="flex-1 bg-white border border-gray-100 rounded-2xl p-4 shadow-sm">
                                                        <span className="bg-indigo-50 text-indigo-700 text-xs font-bold px-2 py-1 rounded-md mb-2 inline-block">{event.time}</span>
                                                        <h3 className="font-bold text-gray-800 text-lg leading-tight mb-1">{event.title}</h3>
                                                        <p className="text-gray-500 text-sm mb-3">{event.desc}</p>
                                                        {event.transport && (
                                                            <div className="mb-3 bg-gray-50 p-2.5 rounded-lg border border-gray-100 text-sm">
                                                                <div className="flex items-start gap-2 mb-1"><TrainIcon className="w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0" /><span className="font-semibold text-gray-700">{event.transport.route}</span></div>
                                                                <div className="text-xs text-gray-500 pl-6">{event.transport.line} â€¢ {event.transport.time}</div>
                                                            </div>
                                                        )}
                                                        {event.location && !event.hideRoute && (
                                                            <div className="flex gap-2 mt-2">
                                                                <a href={getMapUrl(event.location)} target="_blank" className="flex-1 flex items-center justify-center gap-1.5 bg-gray-50 text-gray-700 text-xs font-bold py-2.5 rounded-xl no-underline"><MapPinIcon className="w-3.5 h-3.5" /> åœ°åœ–</a>
                                                                <a href={getDirUrl(event.location, prevLocation)} target="_blank" className="flex-1 flex items-center justify-center gap-1.5 bg-indigo-50 text-indigo-600 text-xs font-bold py-2.5 rounded-xl no-underline"><NavigationIcon className="w-3.5 h-3.5" /> è·¯ç·š</a>
                                                            </div>
                                                        )}
                                                        {event.hideRoute && (
                                                             <div className="flex gap-2 mt-2"><a href={getMapUrl(event.location)} target="_blank" className="flex-1 flex items-center justify-center gap-1.5 bg-gray-50 text-gray-700 text-xs font-bold py-2.5 rounded-xl no-underline"><MapPinIcon className="w-3.5 h-3.5" /> æŸ¥çœ‹ä½ç½®</a></div>
                                                        )}
                                                    </div>
                                                </div>
                                            );
                                        })}
                                    </div>
                                </div>
                            </>
                        )}
                        {view === 'map' && <TravelMapContainer />}
                        {view === 'attractions' && <AttractionGuide />}
                        {view === 'guide' && <StationGuide />}
                        {view === 'booking' && <ReservationPage />}
                    </div>

                    <div className="absolute bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-1 py-2 pb-6 safe-bottom flex justify-around items-center z-30 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)]">
                        <button onClick={() => setView('list')} className={`flex flex-col items-center gap-1 p-1 rounded-xl min-w-[55px] transition-all ${view === 'list' ? 'text-indigo-600 bg-indigo-50' : 'text-gray-400'}`}><ListIcon className="w-6 h-6" /><span className="text-[10px] font-bold">è¡Œç¨‹</span></button>
                        <button onClick={() => setView('map')} className={`flex flex-col items-center gap-1 p-1 rounded-xl min-w-[55px] transition-all ${view === 'map' ? 'text-indigo-600 bg-indigo-50' : 'text-gray-400'}`}><MapIcon className="w-6 h-6" /><span className="text-[10px] font-bold">åœ°åœ–</span></button>
                        <button onClick={() => setView('attractions')} className={`flex flex-col items-center gap-1 p-1 rounded-xl min-w-[55px] transition-all ${view === 'attractions' ? 'text-indigo-600 bg-indigo-50' : 'text-gray-400'}`}><InfoIcon className="w-6 h-6" /><span className="text-[10px] font-bold">ç™¾ç§‘</span></button>
                        <button onClick={() => setView('guide')} className={`flex flex-col items-center gap-1 p-1 rounded-xl min-w-[55px] transition-all ${view === 'guide' ? 'text-indigo-600 bg-indigo-50' : 'text-gray-400'}`}><GuideIcon className="w-6 h-6" /><span className="text-[10px] font-bold">è»Šç«™</span></button>
                        <button onClick={() => setView('booking')} className={`flex flex-col items-center gap-1 p-1 rounded-xl min-w-[55px] transition-all ${view === 'booking' ? 'text-indigo-600 bg-indigo-50' : 'text-gray-400'}`}><CalendarIcon className="w-6 h-6" /><span className="text-[10px] font-bold">é ç´„</span></button>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
        
        setTimeout(() => {
            const loadingEl = document.getElementById('loading');
            if (loadingEl && loadingEl.style.display !== 'none') {
                loadingEl.style.display = 'none';
            }
        }, 3000);
    </script>
</body>
</html>
